{"id":"workspace-020","title":"2.1.1 Implement session file management","description":"Create internal/claude/session.go with: compute encoded project path, write JSONL to Claude's location, update sessions-index.json","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:59.66638375-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:14:56.309723013-08:00","closed_at":"2026-02-02T13:14:56.309723013-08:00","close_reason":"Implemented session file management in internal/claude/session.go with unit tests"}
{"id":"workspace-0nd","title":"Add container-based acceptance test for install script","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-07T10:02:06.274709339-08:00","created_by":"Daniel Jones","updated_at":"2026-02-07T10:11:42.903969259-08:00","closed_at":"2026-02-07T10:11:42.903969259-08:00","close_reason":"Closed","dependencies":[{"issue_id":"workspace-0nd","depends_on_id":"workspace-2ys","type":"blocks","created_at":"2026-02-07T10:02:10.001765549-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-0rv","title":"Implement commit-scoped conversation history","description":"Show only conversation since last commit instead of full session. Uses Git commit graph as source of truth - no external state files. See /workspace/openspec/changes/commit-scoped-conversations/PLAN.md","status":"closed","priority":1,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:48:56.335646343-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:53:43.252243753-08:00","closed_at":"2026-02-03T10:53:43.252243753-08:00","close_reason":"Implemented commit-scoped conversation history with incremental display by default"}
{"id":"workspace-1p3","title":"DRY: Consolidate getConfigPath/GetProjectRoot pattern","description":"Nearly identical 'get project root' logic in internal/config/config.go:99-114 and internal/session/tracker.go:253-268. Create shared GetProjectRoot() utility.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:37.977544833-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:34:55.330423633-08:00","closed_at":"2026-02-05T09:34:55.330423633-08:00","close_reason":"Closed","dependencies":[{"issue_id":"workspace-1p3","depends_on_id":"workspace-icj","type":"blocks","created_at":"2026-02-05T09:28:51.546131631-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-1sl","title":"Bash install script","description":"Create a platform-sensitive install script for claudit that works via curl | bash, similar to beads.\n\nReference: https://raw.githubusercontent.com/steveyegge/beads/main/scripts/install.sh\nExample usage: curl -fsSL https://raw.githubusercontent.com/DanielJonesEB/claudit/main/scripts/install.sh | bash\n\nRequirements:\n- Platform detection (Darwin/Linux/FreeBSD, x86_64/arm64/aarch64)\n- Multiple installation methods with fallback chain:\n  1. Download precompiled binaries from GitHub Releases\n  2. Fallback to `go install` if Go 1.24+ available\n  3. Fallback to source build from git clone\n- Smart install location: /usr/local/bin if writable, else ~/.local/bin (or GOBIN/GOPATH/bin for Go)\n- PATH validation and helpful warnings\n- For macOS: codesign binaries to avoid Gatekeeper delays\n- Detect and warn about multiple installations in PATH\n\nThe script should \"just work\" for users without requiring manual intervention.","status":"closed","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-07T17:25:15.923141Z","created_by":"Daniel Jones","updated_at":"2026-02-07T10:22:57.812271418-08:00","closed_at":"2026-02-07T10:22:57.812271418-08:00","close_reason":"All requirements implemented: platform detection, fallback chain (releases → go install → source build), smart install location, PATH validation, macOS codesigning, multiple installation warnings. Final fix was correcting welcome message to say 'init' instead of 'store'."}
{"id":"workspace-2ih","title":"Use custom git notes ref (refs/notes/claude-conversations)","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T12:32:28.580060251-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T12:36:27.416117417-08:00","closed_at":"2026-02-05T12:36:27.416117417-08:00","close_reason":"Closed"}
{"id":"workspace-2qe","title":"DRY: Create RequireGitRepo wrapper for command validation","description":"All 8 command files call git.IsInsideWorkTree() with identical error handling. Consider middleware pattern or wrapper function.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:42.363914543-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:36:14.044524169-08:00","closed_at":"2026-02-05T09:36:14.044524169-08:00","close_reason":"Closed"}
{"id":"workspace-2ys","title":"Enable Docker-in-Docker in devcontainer","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-07T10:02:05.234320339-08:00","created_by":"Daniel Jones","updated_at":"2026-02-07T10:11:42.8919863-08:00","closed_at":"2026-02-07T10:11:42.8919863-08:00","close_reason":"Closed"}
{"id":"workspace-34i","title":"Fix incorrect Claude Code hook format","description":"The hook format written by 'claudit init' is incorrect and doesn't match the Claude Code hook specification. Current format uses 'hooks.postToolUse' at top level with nested matcher object, but Claude Code expects 'hooks.PostToolUse' nested under a 'hooks' object with a string matcher.","status":"closed","priority":0,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-03T00:01:11.747182585-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T00:03:13.151888794-08:00","closed_at":"2026-02-03T00:03:13.151888794-08:00","close_reason":"Fixed hook format to use correct Claude Code structure: nested 'hooks.PostToolUse' with string matcher instead of 'hooks.postToolUse' with object matcher"}
{"id":"workspace-3gr","title":"Fix silent failures in store command","description":"The store command returns nil on all error paths, making failures completely silent. This means when the Claude Code hook fails to store notes, users have no indication of the problem.\n\nProblems:\n- Lines 45, 51, 62, 68, 74, 80, 89, 102, 109, 114 in cmd/store.go all return nil on error\n- Errors are only logged to stderr with logWarning()\n- Hook appears successful even when storage fails\n- Users don't know conversations aren't being saved\n\nFix:\n- Return errors for critical failures (git note add, HEAD commit retrieval)\n- Keep silent returns only for expected cases (non-commit commands, not in git repo)\n- Consider adding --verbose flag for debugging\n- Update error messages to be more actionable\n\nImpact: Users report notes not being stored but no visible errors","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-03T01:28:01.758045469-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T01:45:24.990940424-08:00","closed_at":"2026-02-03T01:45:24.990940424-08:00","close_reason":"Closed"}
{"id":"workspace-3ni","title":"Ability to show conversation history via the terminal, as well as the browser","description":"We currently have claudit serve that starts a webserver with an interactive UI for looking at the conversation history for given commit. We should implement this in the terminal; maybe first a non-interactive version (`claudit show REF` or something?) and we could make an interactive version in a later task. We need this in part to speed up our own testing cycle.","status":"closed","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-03T08:12:30.089776887-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T08:26:23.932138176-08:00","closed_at":"2026-02-03T08:26:23.932138176-08:00","close_reason":"Implemented claudit show command with terminal renderer, acceptance tests, and version bump to 0.3.0"}
{"id":"workspace-3tk","title":"Fix manual commit capture to work after session ends","description":"Manual commits made after Claude exits don't get captured because: 1) session-end deletes active-session.json, and 2) the fallback relies on sessions-index.json which Claude Code doesn't create. Fix: add fallback to scan Claude's project dir for recent .jsonl files.","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-04T12:07:57.939316293-08:00","created_by":"Daniel Jones","updated_at":"2026-02-04T12:13:37.032856922-08:00","closed_at":"2026-02-04T12:13:37.032856922-08:00","close_reason":"Fixed by adding fallback to scan Claude session directory for recent .jsonl files"}
{"id":"workspace-453","title":"DRY: Create EnsureDir helper for repeated MkdirAll","description":"os.MkdirAll(dir, 0755) appears 12+ times across session/tracker.go, config/config.go, claude/session.go, git/hooks.go, claude/hooks.go. Extract helper.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:40.341797084-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:34:55.355692133-08:00","closed_at":"2026-02-05T09:34:55.355692133-08:00","close_reason":"Closed"}
{"id":"workspace-481","title":"Clean up web handler error response duplication","description":"Extract writeJSONError helper to reduce duplication in handlers.go (10+ instances of the same set-header/set-status/encode-JSON pattern in handleResume and handleCommitDetail). Also fix decoder error checking in handlers_test.go.","status":"closed","priority":3,"issue_type":"chore","owner":"daniel@ajps.limited","created_at":"2026-02-05T13:03:39.831018131-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T13:05:33.251254628-08:00","closed_at":"2026-02-05T13:05:33.251254628-08:00","close_reason":"Extracted writeJSONError helper in handlers.go (replaced 11 instances of duplicated JSON error response pattern). Added decodeJSON test helper in handlers_test.go to properly check all JSON decoder errors."}
{"id":"workspace-5aa","title":"Update specs for commit-scoped conversations","description":"Update openspec docs to reflect the new incremental conversation display feature","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:49:06.032695666-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:49:57.09798376-08:00","closed_at":"2026-02-03T10:49:57.09798376-08:00","close_reason":"Created proposal.md, specs/cli/spec.md, specs/web-visualization/spec.md, and tasks.md"}
{"id":"workspace-5bg","title":"3.3 Web UI","description":"Build commit graph UI, conversation viewer UI, resume button","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:18:12.109084339-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:21:43.434051715-08:00","closed_at":"2026-02-02T13:21:43.434051715-08:00","close_reason":"Implemented web visualization with serve command, API endpoints, and UI","dependencies":[{"issue_id":"workspace-5bg","depends_on_id":"workspace-dxq","type":"blocks","created_at":"2026-02-02T13:18:17.084019008-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-6ga","title":"DRY: Extract findParentConversationBoundary to shared package","description":"Identical function in cmd/show.go:124-171 and internal/web/handlers.go:227-271. Extract to internal/claude or internal/transcript package.","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:35.472775846-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:30:57.568338092-08:00","closed_at":"2026-02-05T09:30:57.568338092-08:00","close_reason":"Closed"}
{"id":"workspace-6jw","title":"Fix integration test to fail on missing notes","description":"The Claude Code integration test (tests/integration/claude_integration_test.go) doesn't fail when notes aren't stored, making it unable to catch real-world storage failures.\n\nProblems:\n- Line 184: Returns early without failing when notes command errors\n- Line 197: Logs 'may not have triggered' but doesn't fail test\n- Test passes even when hook completely fails to store notes\n- This allowed the silent failure bug to go undetected\n\nFix (lines 164-198):\n1. After Claude runs, verify commit was created\n2. If commit exists, ASSERT note exists (use t.Fatal if missing)\n3. Parse and validate note JSON structure\n4. Check stderr for claudit warnings\n5. Only allow 'no note' if commit genuinely failed\n\nThe test should fail loudly when:\n- Commit succeeds but note missing\n- Note exists but is malformed\n- stderr contains claudit warnings\n\nThis is the test that should have caught the silent failure bug.","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-03T01:28:07.197665347-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T01:34:38.27883975-08:00","closed_at":"2026-02-03T01:34:38.27883975-08:00","close_reason":"Closed"}
{"id":"workspace-6l5","title":"Write tests for commit-scoped conversations","description":"Unit tests for transcript diff functions, integration tests for show command","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:49:05.44593793-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:53:42.264536128-08:00","closed_at":"2026-02-03T10:53:42.264536128-08:00","close_reason":"Added unit tests for transcript functions and acceptance tests for incremental show command","dependencies":[{"issue_id":"workspace-6l5","depends_on_id":"workspace-j0k","type":"blocks","created_at":"2026-02-03T10:49:12.998066795-08:00","created_by":"Daniel Jones"},{"issue_id":"workspace-6l5","depends_on_id":"workspace-9mj","type":"blocks","created_at":"2026-02-03T10:49:13.03382942-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-7il","title":"2.3.1 Implement list command","description":"Create cmd/list.go: list commits with conversations, display SHA, date, message preview","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:03.404260752-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.076058715-08:00","closed_at":"2026-02-02T13:17:43.076058715-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-7il","depends_on_id":"workspace-g6c","type":"blocks","created_at":"2026-02-02T13:13:09.503580338-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-7t4","title":"Fix path encoding mismatch in test helper","description":"## Problem\n\nResume tests fail on macOS (resume_test.go:108, :121) due to path encoding mismatch between test helper and production code.\n\n## Root Cause\n\nTest helper `encodeProjectPath()` in `testutil/claude_env.go:112` doesn't match production `EncodeProjectPath()` in `internal/claude/session.go:35`:\n\n- Production code ensures encoded path always starts with `-` (lines 41-43)\n- Test helper doesn't add this prefix for relative paths\n\nWhen resume command writes session file to `~/.claude/projects/-tmp-repo-123/`, the test checks at `~/.claude/projects/tmp-repo-123/` and doesn't find it.\n\n## Solution\n\nUpdate test helper `encodeProjectPath()` to match production behavior — ensure leading dash prefix.","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-05T10:47:11.562780799-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T10:55:40.289921007-08:00","closed_at":"2026-02-05T10:55:40.289921007-08:00","close_reason":"Closed"}
{"id":"workspace-802","title":"Add GetParentCommits function to git package","description":"Add function to internal/git/repo.go to get parent commit SHAs for a given commit","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:49:00.799537845-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:50:14.927540921-08:00","closed_at":"2026-02-03T10:50:14.927540921-08:00","close_reason":"Implemented GetParentCommits and transcript diff functions"}
{"id":"workspace-8pr","title":"Milestone 1: Store Conversations","description":"Automatically capture and store Claude Code conversations as Git Notes on commits. Notes sync with push/pull.","status":"closed","priority":1,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-02T10:51:12.397782511-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T11:40:29.766475959-08:00","closed_at":"2026-02-02T11:40:29.766475959-08:00","close_reason":"Milestone 1 complete - all 17 tasks implemented, code committed"}
{"id":"workspace-8s3","title":"Test issue - please delete","status":"tombstone","priority":4,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T10:34:25.931273513-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T10:34:32.908803252-08:00","deleted_at":"2026-02-02T10:34:32.908803252-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"workspace-9mj","title":"Update web API for incremental display","description":"Add ?incremental=true query param support to internal/web/handlers.go","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:49:04.139169805-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:51:38.519031668-08:00","closed_at":"2026-02-03T10:51:38.519031668-08:00","close_reason":"Updated web handlers with ?incremental=true support","dependencies":[{"issue_id":"workspace-9mj","depends_on_id":"workspace-802","type":"blocks","created_at":"2026-02-03T10:49:12.929559795-08:00","created_by":"Daniel Jones"},{"issue_id":"workspace-9mj","depends_on_id":"workspace-a98","type":"blocks","created_at":"2026-02-03T10:49:12.96278842-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-9xu","title":"2.2.2 Add acceptance tests for resume command","description":"Tests: resume restores transcript, calls claude --resume, resolves branch/relative refs, handles missing conversations, warns about uncommitted changes","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:02.50642196-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.064458131-08:00","closed_at":"2026-02-02T13:17:43.064458131-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-9xu","depends_on_id":"workspace-g6c","type":"blocks","created_at":"2026-02-02T13:13:09.470026338-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-a5g","title":"Add acceptance test for sync --remote flag with non-origin remote","notes":"The sync push/pull commands accept a --remote flag (defaults to 'origin') but tests only use the default. Add a test that configures a second remote and verifies sync works with --remote=other.","status":"closed","priority":4,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:53:32.109775334-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:01:12.300754881-08:00","closed_at":"2026-02-02T13:01:12.300754881-08:00","close_reason":"Closed"}
{"id":"workspace-a98","title":"Add transcript diff functions","description":"Add GetLastEntryUUID() and GetEntriesSince(uuid) methods to internal/claude/transcript.go","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:49:02.118506137-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:50:14.939398004-08:00","closed_at":"2026-02-03T10:50:14.939398004-08:00","close_reason":"Implemented GetParentCommits and transcript diff functions"}
{"id":"workspace-ahk","title":"Improve resume test coverage","description":"Add unit tests for the storage layer (compress, format) and acceptance tests for resume error/edge-case scenarios including: corrupted transcripts, checksum mismatches, decompression failures, and other untested error paths.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-07T10:29:15.432387218-08:00","created_by":"Daniel Jones","updated_at":"2026-02-07T10:35:25.767280417-08:00","closed_at":"2026-02-07T10:35:25.767280417-08:00","close_reason":"Added 16 unit tests for storage layer (compress.go, format.go) and 8 new acceptance tests for resume edge cases (corrupt JSON, checksum mismatch, decompression failure, bad base64, relative refs, content verification, index metadata, missing args)"}
{"id":"workspace-auh","title":"Investigate Claude Code integration testing with OAUTH_TOKEN","description":"Investigate how to run automated tests that actually invoke Claude Code to verify the hook integration works end-to-end.\n\nResearch areas:\n1. Check if Claude Code supports OAUTH_TOKEN or ANTHROPIC_API_KEY env vars for non-interactive auth\n2. Look into 'claude --print' mode for non-interactive usage\n3. Determine if there's a way to mock or stub Claude Code responses for testing\n4. Consider CI secrets management if API keys are needed\n5. Document findings and implement integration test if feasible\n\nGoal: Have an automated test that runs 'claude --print' with a simple prompt, triggers a git commit, and verifies the conversation was stored as a git note.","notes":"## Additional Finding: setup-token Authentication\n\n### CLAUDE_CODE_OAUTH_TOKEN\n- Generated by `claude setup-token` command\n- For Claude Pro/Max subscribers (uses subscription quota, not API billing)\n- Stored in platform-specific credential store (macOS Keychain, etc.)\n\n### Important Caveat\nSetting only CLAUDE_CODE_OAUTH_TOKEN is NOT sufficient for non-interactive use.\nAlso requires `~/.claude.json` with:\n```json\n{\"hasCompletedOnboarding\": true}\n```\n\n### Comparison\n| Method | Env Var | Best For |\n|--------|---------|----------|\n| API Key | ANTHROPIC_API_KEY | CI/CD (recommended) |\n| OAuth Token | CLAUDE_CODE_OAUTH_TOKEN | Pro/Max subscribers wanting subscription billing |\n\n### Updated Integration Test\nNow supports both authentication methods - will use whichever is available.\nANTHROPIC_API_KEY takes precedence if both are set (Claude's default behavior).","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T00:30:09.400542167-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T01:01:11.266784084-08:00","closed_at":"2026-02-03T01:01:11.266784084-08:00","close_reason":"Added CLAUDE_CODE_OAUTH_TOKEN support"}
{"id":"workspace-b4x","title":"Implement manual commit capture feature","description":"Implement the add-manual-commit-capture openspec change: session tracking, hooks, idempotent storage, manual store command","status":"closed","priority":1,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-04T11:09:20.178042471-08:00","created_by":"Daniel Jones","updated_at":"2026-02-04T11:33:42.187832883-08:00","closed_at":"2026-02-04T11:33:42.187832883-08:00","close_reason":"Implemented manual commit capture feature: session tracking, Claude hooks, post-commit git hook, idempotent storage, documentation"}
{"id":"workspace-bta","title":"2.1.2 Set up isolated Claude test environment","description":"Create testutil/claude_env.go with helpers for temp HOME directory, pre-populate projects structure, skip when CLAUDIT_SKIP_CLAUDE_TESTS=1","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:59.699087-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:15:33.05377121-08:00","closed_at":"2026-02-02T13:15:33.05377121-08:00","close_reason":"Created testutil/claude_env.go for isolated Claude test environments"}
{"id":"workspace-c58","title":"DRY: Move logging functions to shared package","description":"logWarning() and logInfo() defined only in cmd/store.go:181-187 but could be useful across all commands. Move to internal/cli/log.go.","status":"closed","priority":3,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:44.465331586-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:34:55.383767091-08:00","closed_at":"2026-02-05T09:34:55.383767091-08:00","close_reason":"Closed"}
{"id":"workspace-coo","title":"Implement Milestone 2: Resume Sessions","description":"Implement session resume functionality including: session file management, resume command, list command, and acceptance tests. Users can restore and resume Claude Code sessions from any commit with a stored conversation.","status":"closed","priority":1,"issue_type":"epic","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:52.204278136-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:22:12.468308673-08:00","closed_at":"2026-02-02T13:22:12.468308673-08:00","close_reason":"Milestone 2 Complete: Resume sessions implemented with resume command, list command, session file management, and acceptance tests"}
{"id":"workspace-cx9","title":"Fix e2e test: sync push not returning 'Pushed' in output","status":"closed","priority":2,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:31:50.153361595-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:47:20.504056802-08:00","closed_at":"2026-02-02T12:47:20.504056802-08:00","close_reason":"Fixed infinite recursion in pre-push hook and consolidated binary build in BeforeSuite"}
{"id":"workspace-d21","title":"Fix macOS /tmp symlink path mismatch","description":"## Problem\n\nManual store tests fail on macOS (manual_store_test.go:80, :116, :161) due to /tmp symlink resolution.\n\n## Root Cause\n\nOn macOS, `/tmp` is a symlink to `/private/tmp`:\n\n1. `os.MkdirTemp()` returns `/tmp/claudit-test-xxx`\n2. Test writes active-session.json with `project_path: /tmp/claudit-test-xxx`\n3. `claudit store --manual` calls `git rev-parse --show-toplevel`\n4. Git resolves symlink → `/private/tmp/claudit-test-xxx`\n5. Comparison at tracker.go:118 fails: `/tmp/...` != `/private/tmp/...`\n6. `DiscoverSession()` returns nil, store exits silently\n\n## Solution\n\nUse `filepath.EvalSymlinks()` to canonicalize paths before comparison in `DiscoverSession()` (tracker.go:118).","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-05T10:47:14.547150426-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T10:52:55.178181792-08:00","closed_at":"2026-02-05T10:52:55.178181792-08:00","close_reason":"Closed"}
{"id":"workspace-dvf","title":"Validate Milestone 1 Store Conversations implementation","description":"Run validation tests against the Milestone 1 Store Conversations implementation. Verify that conversations can be created, retrieved, listed, and deleted via the REST API. Check database persistence and error handling.","status":"tombstone","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:13:31.161008459-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:54:11.313505172-08:00","dependencies":[{"issue_id":"workspace-dvf","depends_on_id":"workspace-h33","type":"blocks","created_at":"2026-02-02T12:13:39.17635013-08:00","created_by":"Daniel Jones"}],"deleted_at":"2026-02-02T12:54:11.313505172-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"workspace-dxq","title":"3.2 API Endpoints","description":"Implement commits API, graph API, resume API endpoints","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:18:10.951844089-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:21:43.42469834-08:00","closed_at":"2026-02-02T13:21:43.42469834-08:00","close_reason":"Implemented web visualization with serve command, API endpoints, and UI","dependencies":[{"issue_id":"workspace-dxq","depends_on_id":"workspace-m9i","type":"blocks","created_at":"2026-02-02T13:18:17.046893716-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-g6c","title":"2.2.1 Implement resume command","description":"Create cmd/resume.go: resolve commit reference, read/decompress conversation, verify checksum, restore session files, checkout commit, launch claude --resume","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:02.476938751-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.051576298-08:00","closed_at":"2026-02-02T13:17:43.051576298-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-g6c","depends_on_id":"workspace-020","type":"blocks","created_at":"2026-02-02T13:13:09.396044504-08:00","created_by":"Daniel Jones"},{"issue_id":"workspace-g6c","depends_on_id":"workspace-bta","type":"blocks","created_at":"2026-02-02T13:13:09.433013796-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-h33","title":"Create manual test plan for Milestone 1","description":"Document a manual test plan for Milestone 1 Store Conversations. Include step-by-step instructions for testing all CRUD operations, edge cases, and expected results that can be verified manually via curl or similar tools.","status":"tombstone","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:13:31.722658751-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:14:47.2889143-08:00","deleted_at":"2026-02-02T12:14:47.2889143-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"workspace-h6a","title":"Review spec and verify test coverage is complete","status":"closed","priority":3,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:31:50.861303845-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:53:04.031573627-08:00","closed_at":"2026-02-02T12:53:04.031573627-08:00","close_reason":"Test coverage review complete - Phase 1 has full acceptance test coverage for all headline features","dependencies":[{"issue_id":"workspace-h6a","depends_on_id":"workspace-cx9","type":"blocks","created_at":"2026-02-02T12:31:55.486800208-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-i8s","title":"Manual acceptance test plan for claudit","description":"# Claudit Manual Acceptance Test Plan\n\n## What is Claudit?\nClaudit stores Claude Code conversation history as Git Notes attached to commits. This enables teams to preserve AI-assisted development context alongside their code.\n\n## Prerequisites\n- A git repository (can be any test repo)\n- Claude Code CLI installed\n- `claudit` binary built and in PATH\n\n## Test 1: Initialize claudit in a repository\n```bash\ncd /path/to/test-repo\nclaudit init\n```\n**Expected:**\n- ✓ Creates/updates `.claude/settings.local.json` with PostToolUse hook\n- ✓ Installs git hooks (pre-push, post-merge, post-checkout)\n- Verify hooks exist: `ls -la .git/hooks/`\n\n## Test 2: Store conversation on commit (simulated)\n```bash\n# Create a sample hook input JSON\necho '{\"session_id\":\"test-123\",\"transcript_path\":\"/tmp/test-transcript.jsonl\",\"tool_name\":\"Bash\",\"tool_input\":{\"command\":\"git commit -m test\"}}' | claudit store\n```\n**Expected:**\n- If no transcript exists, should log warning and exit silently\n- With valid transcript, should store as git note on HEAD\n\n## Test 3: Sync commands\n```bash\n# Push notes to remote\nclaudit sync push --remote origin\n\n# Pull notes from remote  \nclaudit sync pull --remote origin\n```\n**Expected:**\n- Push/pull operations succeed or warn gracefully if no notes exist\n\n## Test 4: Version check\n```bash\nclaudit --version\n```\n**Expected:** Shows `claudit version 0.1.0`\n\n## Test 5: Full integration (with Claude Code)\n1. Run `claudit init` in a repo\n2. Use Claude Code to make changes and commit\n3. Check that conversation was stored: `git notes --ref refs/notes/claude-conversations show HEAD`","status":"open","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:06:56.791826429-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:06:56.791826429-08:00"}
{"id":"workspace-icj","title":"DRY: Create RunGitCommand helper for repeated git exec pattern","description":"Pattern exec.Command('git', ...) + TrimSpace repeated 10+ times in internal/git/repo.go, internal/git/notes.go, internal/config/config.go, internal/session/tracker.go. Extract helper function.","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:36.680352138-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:30:57.555598217-08:00","closed_at":"2026-02-05T09:30:57.555598217-08:00","close_reason":"Closed"}
{"id":"workspace-j0k","title":"Update show command for incremental display","description":"Modify cmd/show.go to filter by parent commit, add --full flag","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:49:03.305564054-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T10:50:55.631813092-08:00","closed_at":"2026-02-03T10:50:55.631813092-08:00","close_reason":"Updated cmd/show.go with incremental display and --full flag","dependencies":[{"issue_id":"workspace-j0k","depends_on_id":"workspace-802","type":"blocks","created_at":"2026-02-03T10:49:12.862995253-08:00","created_by":"Daniel Jones"},{"issue_id":"workspace-j0k","depends_on_id":"workspace-a98","type":"blocks","created_at":"2026-02-03T10:49:12.895929295-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-jjj","title":"Auto-add .claudit/ to .gitignore during init","description":"claudit init should automatically add .claudit/ to the project's .gitignore so users don't accidentally commit ephemeral runtime state (active-session.json) or local config. Similar to how beads manages its own .gitignore entries.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-07T11:52:05.869428088-08:00","created_by":"Daniel Jones","updated_at":"2026-02-07T12:13:19.748690845-08:00","closed_at":"2026-02-07T12:13:19.748690845-08:00","close_reason":"claudit init now auto-adds .claudit/ to .gitignore. Idempotent, handles missing trailing newline."}
{"id":"workspace-kvh","title":"Add 'claudit upgrade' command","description":"Implement a `claudit upgrade` command that safely upgrades claudit to the latest compatible version.\n\nRequirements:\n- Check current installed version\n- Query GitHub Releases API for latest version\n- Respect semantic versioning - do NOT upgrade across breaking changes (major version bumps)\n- Download and install using the same logic as the Bash install script\n- Provide clear feedback about what's being upgraded from/to\n- Handle edge cases:\n  - Already on latest version (no-op with message)\n  - No internet connection (graceful error)\n  - Insufficient permissions for install location (helpful error)\n- Optional flags:\n  - `--force` to allow major version upgrades\n  - `--version X.Y.Z` to install a specific version\n  - `--check` to just show available updates without installing\n\nSafety: By default, only upgrade within the same major version (e.g., 1.2.3 -\u003e 1.5.0 is OK, but 1.2.3 -\u003e 2.0.0 requires --force).\n\nDepends on: Bash install script infrastructure for platform detection and download logic.","status":"open","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-07T17:30:01.201304Z","created_by":"Daniel Jones","updated_at":"2026-02-07T17:30:01.201304Z","dependencies":[{"issue_id":"workspace-kvh","depends_on_id":"workspace-1sl","type":"blocks","created_at":"2026-02-07T17:30:49.226597Z","created_by":"Daniel Jones"}]}
{"id":"workspace-m9i","title":"3.1 Web Server Foundation","description":"Set up embedded static assets, implement HTTP server foundation, create serve command","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:18:09.709034671-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:21:43.413932673-08:00","closed_at":"2026-02-02T13:21:43.413932673-08:00","close_reason":"Implemented web visualization with serve command, API endpoints, and UI"}
{"id":"workspace-ml5","title":"Implement dynamic git notes ref selection","description":"Implement use-default-git-notes-ref proposal: allow users to choose between default ref (refs/notes/commits) and custom ref (refs/notes/claude-conversations) during init, with appropriate git configuration.","status":"closed","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-03T02:00:32.321740553-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T02:08:37.417067305-08:00","closed_at":"2026-02-03T02:08:37.417067305-08:00","close_reason":"Closed"}
{"id":"workspace-nmb","title":"Fix acceptance tests failing in fresh clone","description":"## Problem\n\nAcceptance tests fail in a fresh clone but pass when `claudit` is globally installed:\n\n**Failing tests:**\n- `resume_test.go:108` - writes transcript to Claude projects directory\n- `resume_test.go:121` - creates sessions-index.json  \n- `manual_store_test.go:80` - stores conversation when active session exists\n- `manual_store_test.go:116` - skips storage when same session already stored\n- `manual_store_test.go:161` - overwrites when different session stored\n\n## Root Cause\n\n1. `testutil.RunClauditInDir()` adds the test binary to PATH when running claudit directly\n2. `claudit init` installs git hooks that call `claudit store --manual`\n3. `repo.Run(\"git\", \"commit\", ...)` runs git with the **system PATH**, not the test PATH\n4. Git hooks fail because `claudit` isn't in the system PATH in a fresh clone\n\n## Solution\n\nCall `repo.SetBinaryPath(testutil.BinaryPath())` in the affected test setups so that `repo.Run()` passes the binary path to git, making hooks work.\n\nThe `GitRepo.SetBinaryPath()` method exists (git.go:127) but isn't being used in these tests.","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-05T10:43:59.923052961-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T10:47:20.325175679-08:00","closed_at":"2026-02-05T10:47:20.325175679-08:00","close_reason":"Superseded by workspace-7t4 and workspace-d21 with specific root causes"}
{"id":"workspace-rj9","title":"2.3.2 Add acceptance tests for list command","description":"Tests: list shows commits with conversations, empty repo shows empty, output format includes SHA/date/message","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:03.433763418-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.086672548-08:00","closed_at":"2026-02-02T13:17:43.086672548-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-rj9","depends_on_id":"workspace-7il","type":"blocks","created_at":"2026-02-02T13:13:09.54337913-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-rxy","title":"Cleanup: Remove unused HookExists export","description":"HookExists() in internal/git/hooks.go:110 is never called anywhere in the codebase. Remove or document if planned for future API.","status":"closed","priority":3,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:43.20305121-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:36:14.032137377-08:00","closed_at":"2026-02-05T09:36:14.032137377-08:00","close_reason":"Closed"}
{"id":"workspace-sam","title":"DRY: Extract ReadHookInput helper for hook commands","description":"Similar stdin JSON parsing in cmd/store.go:56-66, cmd/session_start.go:34-44, cmd/session_end.go:34-44. Extract to shared helper.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:41.356364793-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:34:55.367364091-08:00","closed_at":"2026-02-05T09:34:55.367364091-08:00","close_reason":"Closed"}
{"id":"workspace-usp","title":"Update web view to use incremental conversation API","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T11:30:04.967750263-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T11:31:22.727732882-08:00","closed_at":"2026-02-03T11:31:22.727732882-08:00","close_reason":"Implemented incremental view toggle in web UI"}
{"id":"workspace-v6e","title":"Improve acceptance tests for real-world usage","description":"Add acceptance tests that better simulate real Claude Code integration. Consider: 1) Testing hook format matches Claude Code exactly, 2) Testing that claudit binary can be found in PATH, 3) Documentation about installation requirements","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T00:03:15.231443795-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T00:07:47.343727463-08:00","closed_at":"2026-02-03T00:07:47.343727463-08:00","close_reason":"Added integration test script and doctor command for diagnostics"}
{"id":"workspace-voz","title":"Add verbose option","description":"Add optional verbose/debug output to claudit. Design considerations:\n- Activation: env var (e.g. CLAUDIT_VERBOSE=1) vs config directory setting vs CLI flag\n- Output destination: STDOUT, STDERR, or log file — need to evaluate implications for each\n- Must not interfere with normal tool output that may be piped/parsed","status":"closed","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-07T11:47:08.049836423-08:00","created_by":"Daniel Jones","updated_at":"2026-02-07T12:10:17.274104969-08:00","closed_at":"2026-02-07T12:10:17.274104969-08:00","close_reason":"Implemented claudit debug command with --on/--off/--toggle, config package, LogDebug throughout codebase. CI green."}
{"id":"workspace-vq5","title":"Add acceptance test for git hooks triggering auto-sync on push/pull","notes":"Tests verify hooks are installed (file exists, executable) but don't test that 'git push' actually triggers the pre-push hook to sync notes. Complex because we added --no-verify to prevent recursion - need to verify the hook still runs for user's git push while not recursing when claudit calls git push internally.","status":"closed","priority":4,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:53:33.231005418-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:01:12.311970673-08:00","closed_at":"2026-02-02T13:01:12.311970673-08:00","close_reason":"Closed"}
{"id":"workspace-w6d","title":"Add automated tests for web view rendering","description":"The web view (index.html) has JavaScript rendering logic that mirrors the terminal renderer, but has no automated tests.\n\nOptions to consider:\n1. Browser automation tests (Playwright/Puppeteer) - test actual rendering\n2. Extract JavaScript to separate testable modules + Jest\n3. Snapshot testing of rendered HTML\n\nRelated: Terminal renderer has unit tests in render_test.go that could serve as reference for test cases.","status":"closed","priority":3,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T10:07:03.685884513-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T13:05:47.632139593-08:00","closed_at":"2026-02-05T13:01:40.912867048-08:00"}
{"id":"workspace-wq1","title":"DRY: Extract GetStoredConversation helper for note retrieval","description":"Same GetNote() + UnmarshalStoredConversation() pattern in cmd/show.go, cmd/resume.go, cmd/list.go, internal/web/handlers.go (multiple places). Extract to storage package.","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-05T09:28:39.2507935-08:00","created_by":"Daniel Jones","updated_at":"2026-02-05T09:34:55.3437938-08:00","closed_at":"2026-02-05T09:34:55.3437938-08:00","close_reason":"Closed"}
{"id":"workspace-xt6","title":"Implement Milestone 3: Web Visualization","description":"Implement web visualization including: embedded static assets, HTTP server, serve command, API endpoints (commits, graph, resume), and web UI (graph visualization, conversation viewer, resume button).","status":"closed","priority":2,"issue_type":"epic","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:52.840423178-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:22:12.504190131-08:00","closed_at":"2026-02-02T13:22:12.504190131-08:00","close_reason":"Milestone 3 Complete: Web visualization implemented with serve command, API endpoints, web UI, and auto-browser opening"}
{"id":"workspace-y0r","title":"Upgrade golangci-lint in devcontainer Dockerfile","description":"golangci-lint v1.62.2 in the devcontainer was built with Go 1.23, but go.mod targets Go 1.24. This causes `make build`, `make test`, and `make lint` to all fail with: 'the Go language version (go1.23) used to build golangci-lint is lower than the targeted Go version (1.24)'. Fix: replace the beads installer's bundled golangci-lint by adding an explicit install step in .devcontainer/Dockerfile, e.g.: RUN curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/HEAD/install.sh | sh -s -- -b /home/node/.local/bin v2.1.6","status":"closed","priority":2,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-06T01:04:25.650992007-08:00","created_by":"Daniel Jones","updated_at":"2026-02-07T17:09:51.695676Z","closed_at":"2026-02-07T17:09:51.695676Z","close_reason":"Upgraded golangci-lint to v2.8.0 (built with Go 1.25.5) by adding explicit install step in Dockerfile. Updated .golangci.yml to v2 config format. Tested with devcontainer CLI - build works successfully."}
