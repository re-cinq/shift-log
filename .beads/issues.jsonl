{"id":"workspace-020","title":"2.1.1 Implement session file management","description":"Create internal/claude/session.go with: compute encoded project path, write JSONL to Claude's location, update sessions-index.json","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:59.66638375-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:14:56.309723013-08:00","closed_at":"2026-02-02T13:14:56.309723013-08:00","close_reason":"Implemented session file management in internal/claude/session.go with unit tests"}
{"id":"workspace-34i","title":"Fix incorrect Claude Code hook format","description":"The hook format written by 'claudit init' is incorrect and doesn't match the Claude Code hook specification. Current format uses 'hooks.postToolUse' at top level with nested matcher object, but Claude Code expects 'hooks.PostToolUse' nested under a 'hooks' object with a string matcher.","status":"closed","priority":0,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-03T00:01:11.747182585-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T00:03:13.151888794-08:00","closed_at":"2026-02-03T00:03:13.151888794-08:00","close_reason":"Fixed hook format to use correct Claude Code structure: nested 'hooks.PostToolUse' with string matcher instead of 'hooks.postToolUse' with object matcher"}
{"id":"workspace-3gr","title":"Fix silent failures in store command","description":"The store command returns nil on all error paths, making failures completely silent. This means when the Claude Code hook fails to store notes, users have no indication of the problem.\n\nProblems:\n- Lines 45, 51, 62, 68, 74, 80, 89, 102, 109, 114 in cmd/store.go all return nil on error\n- Errors are only logged to stderr with logWarning()\n- Hook appears successful even when storage fails\n- Users don't know conversations aren't being saved\n\nFix:\n- Return errors for critical failures (git note add, HEAD commit retrieval)\n- Keep silent returns only for expected cases (non-commit commands, not in git repo)\n- Consider adding --verbose flag for debugging\n- Update error messages to be more actionable\n\nImpact: Users report notes not being stored but no visible errors","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-03T01:28:01.758045469-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T01:45:24.990940424-08:00","closed_at":"2026-02-03T01:45:24.990940424-08:00","close_reason":"Closed"}
{"id":"workspace-3ni","title":"Ability to show conversation history via the terminal, as well as the browser","description":"We currently have claudit serve that starts a webserver with an interactive UI for looking at the conversation history for given commit. We should implement this in the terminal; maybe first a non-interactive version (`claudit show REF` or something?) and we could make an interactive version in a later task. We need this in part to speed up our own testing cycle.","status":"closed","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-03T08:12:30.089776887-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T08:26:23.932138176-08:00","closed_at":"2026-02-03T08:26:23.932138176-08:00","close_reason":"Implemented claudit show command with terminal renderer, acceptance tests, and version bump to 0.3.0"}
{"id":"workspace-5bg","title":"3.3 Web UI","description":"Build commit graph UI, conversation viewer UI, resume button","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:18:12.109084339-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:21:43.434051715-08:00","closed_at":"2026-02-02T13:21:43.434051715-08:00","close_reason":"Implemented web visualization with serve command, API endpoints, and UI","dependencies":[{"issue_id":"workspace-5bg","depends_on_id":"workspace-dxq","type":"blocks","created_at":"2026-02-02T13:18:17.084019008-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-6jw","title":"Fix integration test to fail on missing notes","description":"The Claude Code integration test (tests/integration/claude_integration_test.go) doesn't fail when notes aren't stored, making it unable to catch real-world storage failures.\n\nProblems:\n- Line 184: Returns early without failing when notes command errors\n- Line 197: Logs 'may not have triggered' but doesn't fail test\n- Test passes even when hook completely fails to store notes\n- This allowed the silent failure bug to go undetected\n\nFix (lines 164-198):\n1. After Claude runs, verify commit was created\n2. If commit exists, ASSERT note exists (use t.Fatal if missing)\n3. Parse and validate note JSON structure\n4. Check stderr for claudit warnings\n5. Only allow 'no note' if commit genuinely failed\n\nThe test should fail loudly when:\n- Commit succeeds but note missing\n- Note exists but is malformed\n- stderr contains claudit warnings\n\nThis is the test that should have caught the silent failure bug.","status":"closed","priority":1,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-03T01:28:07.197665347-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T01:34:38.27883975-08:00","closed_at":"2026-02-03T01:34:38.27883975-08:00","close_reason":"Closed"}
{"id":"workspace-7il","title":"2.3.1 Implement list command","description":"Create cmd/list.go: list commits with conversations, display SHA, date, message preview","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:03.404260752-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.076058715-08:00","closed_at":"2026-02-02T13:17:43.076058715-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-7il","depends_on_id":"workspace-g6c","type":"blocks","created_at":"2026-02-02T13:13:09.503580338-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-8pr","title":"Milestone 1: Store Conversations","description":"Automatically capture and store Claude Code conversations as Git Notes on commits. Notes sync with push/pull.","status":"closed","priority":1,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-02T10:51:12.397782511-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T11:40:29.766475959-08:00","closed_at":"2026-02-02T11:40:29.766475959-08:00","close_reason":"Milestone 1 complete - all 17 tasks implemented, code committed"}
{"id":"workspace-8s3","title":"Test issue - please delete","status":"tombstone","priority":4,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T10:34:25.931273513-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T10:34:32.908803252-08:00","deleted_at":"2026-02-02T10:34:32.908803252-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"workspace-9xu","title":"2.2.2 Add acceptance tests for resume command","description":"Tests: resume restores transcript, calls claude --resume, resolves branch/relative refs, handles missing conversations, warns about uncommitted changes","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:02.50642196-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.064458131-08:00","closed_at":"2026-02-02T13:17:43.064458131-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-9xu","depends_on_id":"workspace-g6c","type":"blocks","created_at":"2026-02-02T13:13:09.470026338-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-a5g","title":"Add acceptance test for sync --remote flag with non-origin remote","notes":"The sync push/pull commands accept a --remote flag (defaults to 'origin') but tests only use the default. Add a test that configures a second remote and verifies sync works with --remote=other.","status":"closed","priority":4,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:53:32.109775334-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:01:12.300754881-08:00","closed_at":"2026-02-02T13:01:12.300754881-08:00","close_reason":"Closed"}
{"id":"workspace-auh","title":"Investigate Claude Code integration testing with OAUTH_TOKEN","description":"Investigate how to run automated tests that actually invoke Claude Code to verify the hook integration works end-to-end.\n\nResearch areas:\n1. Check if Claude Code supports OAUTH_TOKEN or ANTHROPIC_API_KEY env vars for non-interactive auth\n2. Look into 'claude --print' mode for non-interactive usage\n3. Determine if there's a way to mock or stub Claude Code responses for testing\n4. Consider CI secrets management if API keys are needed\n5. Document findings and implement integration test if feasible\n\nGoal: Have an automated test that runs 'claude --print' with a simple prompt, triggers a git commit, and verifies the conversation was stored as a git note.","notes":"## Additional Finding: setup-token Authentication\n\n### CLAUDE_CODE_OAUTH_TOKEN\n- Generated by `claude setup-token` command\n- For Claude Pro/Max subscribers (uses subscription quota, not API billing)\n- Stored in platform-specific credential store (macOS Keychain, etc.)\n\n### Important Caveat\nSetting only CLAUDE_CODE_OAUTH_TOKEN is NOT sufficient for non-interactive use.\nAlso requires `~/.claude.json` with:\n```json\n{\"hasCompletedOnboarding\": true}\n```\n\n### Comparison\n| Method | Env Var | Best For |\n|--------|---------|----------|\n| API Key | ANTHROPIC_API_KEY | CI/CD (recommended) |\n| OAuth Token | CLAUDE_CODE_OAUTH_TOKEN | Pro/Max subscribers wanting subscription billing |\n\n### Updated Integration Test\nNow supports both authentication methods - will use whichever is available.\nANTHROPIC_API_KEY takes precedence if both are set (Claude's default behavior).","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T00:30:09.400542167-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T01:01:11.266784084-08:00","closed_at":"2026-02-03T01:01:11.266784084-08:00","close_reason":"Added CLAUDE_CODE_OAUTH_TOKEN support"}
{"id":"workspace-bta","title":"2.1.2 Set up isolated Claude test environment","description":"Create testutil/claude_env.go with helpers for temp HOME directory, pre-populate projects structure, skip when CLAUDIT_SKIP_CLAUDE_TESTS=1","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:59.699087-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:15:33.05377121-08:00","closed_at":"2026-02-02T13:15:33.05377121-08:00","close_reason":"Created testutil/claude_env.go for isolated Claude test environments"}
{"id":"workspace-coo","title":"Implement Milestone 2: Resume Sessions","description":"Implement session resume functionality including: session file management, resume command, list command, and acceptance tests. Users can restore and resume Claude Code sessions from any commit with a stored conversation.","status":"closed","priority":1,"issue_type":"epic","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:52.204278136-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:22:12.468308673-08:00","closed_at":"2026-02-02T13:22:12.468308673-08:00","close_reason":"Milestone 2 Complete: Resume sessions implemented with resume command, list command, session file management, and acceptance tests"}
{"id":"workspace-cx9","title":"Fix e2e test: sync push not returning 'Pushed' in output","status":"closed","priority":2,"issue_type":"bug","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:31:50.153361595-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:47:20.504056802-08:00","closed_at":"2026-02-02T12:47:20.504056802-08:00","close_reason":"Fixed infinite recursion in pre-push hook and consolidated binary build in BeforeSuite"}
{"id":"workspace-dvf","title":"Validate Milestone 1 Store Conversations implementation","description":"Run validation tests against the Milestone 1 Store Conversations implementation. Verify that conversations can be created, retrieved, listed, and deleted via the REST API. Check database persistence and error handling.","status":"tombstone","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:13:31.161008459-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:54:11.313505172-08:00","dependencies":[{"issue_id":"workspace-dvf","depends_on_id":"workspace-h33","type":"blocks","created_at":"2026-02-02T12:13:39.17635013-08:00","created_by":"Daniel Jones"}],"deleted_at":"2026-02-02T12:54:11.313505172-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"workspace-dxq","title":"3.2 API Endpoints","description":"Implement commits API, graph API, resume API endpoints","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:18:10.951844089-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:21:43.42469834-08:00","closed_at":"2026-02-02T13:21:43.42469834-08:00","close_reason":"Implemented web visualization with serve command, API endpoints, and UI","dependencies":[{"issue_id":"workspace-dxq","depends_on_id":"workspace-m9i","type":"blocks","created_at":"2026-02-02T13:18:17.046893716-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-g6c","title":"2.2.1 Implement resume command","description":"Create cmd/resume.go: resolve commit reference, read/decompress conversation, verify checksum, restore session files, checkout commit, launch claude --resume","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:02.476938751-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.051576298-08:00","closed_at":"2026-02-02T13:17:43.051576298-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-g6c","depends_on_id":"workspace-020","type":"blocks","created_at":"2026-02-02T13:13:09.396044504-08:00","created_by":"Daniel Jones"},{"issue_id":"workspace-g6c","depends_on_id":"workspace-bta","type":"blocks","created_at":"2026-02-02T13:13:09.433013796-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-h33","title":"Create manual test plan for Milestone 1","description":"Document a manual test plan for Milestone 1 Store Conversations. Include step-by-step instructions for testing all CRUD operations, edge cases, and expected results that can be verified manually via curl or similar tools.","status":"tombstone","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:13:31.722658751-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:14:47.2889143-08:00","deleted_at":"2026-02-02T12:14:47.2889143-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"workspace-h6a","title":"Review spec and verify test coverage is complete","status":"closed","priority":3,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:31:50.861303845-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T12:53:04.031573627-08:00","closed_at":"2026-02-02T12:53:04.031573627-08:00","close_reason":"Test coverage review complete - Phase 1 has full acceptance test coverage for all headline features","dependencies":[{"issue_id":"workspace-h6a","depends_on_id":"workspace-cx9","type":"blocks","created_at":"2026-02-02T12:31:55.486800208-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-i8s","title":"Manual acceptance test plan for claudit","description":"# Claudit Manual Acceptance Test Plan\n\n## What is Claudit?\nClaudit stores Claude Code conversation history as Git Notes attached to commits. This enables teams to preserve AI-assisted development context alongside their code.\n\n## Prerequisites\n- A git repository (can be any test repo)\n- Claude Code CLI installed\n- `claudit` binary built and in PATH\n\n## Test 1: Initialize claudit in a repository\n```bash\ncd /path/to/test-repo\nclaudit init\n```\n**Expected:**\n- ✓ Creates/updates `.claude/settings.local.json` with PostToolUse hook\n- ✓ Installs git hooks (pre-push, post-merge, post-checkout)\n- Verify hooks exist: `ls -la .git/hooks/`\n\n## Test 2: Store conversation on commit (simulated)\n```bash\n# Create a sample hook input JSON\necho '{\"session_id\":\"test-123\",\"transcript_path\":\"/tmp/test-transcript.jsonl\",\"tool_name\":\"Bash\",\"tool_input\":{\"command\":\"git commit -m test\"}}' | claudit store\n```\n**Expected:**\n- If no transcript exists, should log warning and exit silently\n- With valid transcript, should store as git note on HEAD\n\n## Test 3: Sync commands\n```bash\n# Push notes to remote\nclaudit sync push --remote origin\n\n# Pull notes from remote  \nclaudit sync pull --remote origin\n```\n**Expected:**\n- Push/pull operations succeed or warn gracefully if no notes exist\n\n## Test 4: Version check\n```bash\nclaudit --version\n```\n**Expected:** Shows `claudit version 0.1.0`\n\n## Test 5: Full integration (with Claude Code)\n1. Run `claudit init` in a repo\n2. Use Claude Code to make changes and commit\n3. Check that conversation was stored: `git notes --ref refs/notes/claude-conversations show HEAD`","status":"open","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:06:56.791826429-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:06:56.791826429-08:00"}
{"id":"workspace-m9i","title":"3.1 Web Server Foundation","description":"Set up embedded static assets, implement HTTP server foundation, create serve command","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:18:09.709034671-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:21:43.413932673-08:00","closed_at":"2026-02-02T13:21:43.413932673-08:00","close_reason":"Implemented web visualization with serve command, API endpoints, and UI"}
{"id":"workspace-ml5","title":"Implement dynamic git notes ref selection","description":"Implement use-default-git-notes-ref proposal: allow users to choose between default ref (refs/notes/commits) and custom ref (refs/notes/claude-conversations) during init, with appropriate git configuration.","status":"closed","priority":2,"issue_type":"feature","owner":"daniel@ajps.limited","created_at":"2026-02-03T02:00:32.321740553-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T02:08:37.417067305-08:00","closed_at":"2026-02-03T02:08:37.417067305-08:00","close_reason":"Closed"}
{"id":"workspace-rj9","title":"2.3.2 Add acceptance tests for list command","description":"Tests: list shows commits with conversations, empty repo shows empty, output format includes SHA/date/message","status":"closed","priority":1,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:13:03.433763418-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:17:43.086672548-08:00","closed_at":"2026-02-02T13:17:43.086672548-08:00","close_reason":"Implemented resume and list commands with acceptance tests - all 39 tests pass","dependencies":[{"issue_id":"workspace-rj9","depends_on_id":"workspace-7il","type":"blocks","created_at":"2026-02-02T13:13:09.54337913-08:00","created_by":"Daniel Jones"}]}
{"id":"workspace-v6e","title":"Improve acceptance tests for real-world usage","description":"Add acceptance tests that better simulate real Claude Code integration. Consider: 1) Testing hook format matches Claude Code exactly, 2) Testing that claudit binary can be found in PATH, 3) Documentation about installation requirements","status":"closed","priority":2,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-03T00:03:15.231443795-08:00","created_by":"Daniel Jones","updated_at":"2026-02-03T00:07:47.343727463-08:00","closed_at":"2026-02-03T00:07:47.343727463-08:00","close_reason":"Added integration test script and doctor command for diagnostics"}
{"id":"workspace-vq5","title":"Add acceptance test for git hooks triggering auto-sync on push/pull","notes":"Tests verify hooks are installed (file exists, executable) but don't test that 'git push' actually triggers the pre-push hook to sync notes. Complex because we added --no-verify to prevent recursion - need to verify the hook still runs for user's git push while not recursing when claudit calls git push internally.","status":"closed","priority":4,"issue_type":"task","owner":"daniel@ajps.limited","created_at":"2026-02-02T12:53:33.231005418-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:01:12.311970673-08:00","closed_at":"2026-02-02T13:01:12.311970673-08:00","close_reason":"Closed"}
{"id":"workspace-xt6","title":"Implement Milestone 3: Web Visualization","description":"Implement web visualization including: embedded static assets, HTTP server, serve command, API endpoints (commits, graph, resume), and web UI (graph visualization, conversation viewer, resume button).","status":"closed","priority":2,"issue_type":"epic","owner":"daniel@ajps.limited","created_at":"2026-02-02T13:12:52.840423178-08:00","created_by":"Daniel Jones","updated_at":"2026-02-02T13:22:12.504190131-08:00","closed_at":"2026-02-02T13:22:12.504190131-08:00","close_reason":"Milestone 3 Complete: Web visualization implemented with serve command, API endpoints, web UI, and auto-browser opening"}
